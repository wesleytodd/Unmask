/* Password (Un)Masking | Version 1.2 | http://wesleytodd.com/ */
(function(a){a.unmask=function(c,b){var d=this;d.$el=a(c);d.$el.data("unmask",d);d.init=function(){d.options=a.extend({},a.unmask.defaultOptions,b);if(d.$el.is("[name^="+d.options.confirmPrefix+"]")){return false}d.$confirm=a("input[name="+d.options.confirmPrefix+d.$el.attr("name")+"]");d.$checkbox=a('<input type="checkbox" class="unmask-checkbox" id="'+d.$el.attr("name")+'_unmask_checkbox" />');if(d.options.defaultMasked=="show"){d.$checkbox.prop("checked",true)}d.$el.after(d.$checkbox);d.$checkbox.wrap('<div class="'+d.options.wrapperClass+'" />').after('<label for="'+d.$el.attr("name")+'_unmask_checkbox" >'+d.options.labelText+"</label>");d.$checkbox.change(function(){var e;if(a(this).is(":checked")){e="text"}else{e="password"}d.replaceFields(e)});if(d.options.defaultMasked=="show"){d.replaceFields("text")}};d.replaceFields=function(f){var g=a('<input type="'+f+'" />');for(var e=0;e<d.options.transferAttrs.length;e++){g.attr(d.options.transferAttrs[e],d.$el.attr(d.options.transferAttrs[e]))}d.$el.trigger("unmaskreplace",[g]);d.$el.replaceWith(g);d.$el=g;if(f=="text"){d.$hiddenpass=a('<input type="password" value="'+d.$el.prop("value")+'" name="'+d.$el.attr("name")+'" style="visibility:hidden;position:absolute;" />');d.$el.after(d.$hiddenpass);d.$el.keyup(function(){d.$hiddenpass.prop("value",a(this).prop("value"))})}else{d.$hiddenpass.remove()}if(d.$confirm.length!==0){var h=a('<input type="'+f+'" />');for(var e=0;e<d.options.transferAttrs.length;e++){h.attr(d.options.transferAttrs[e],d.$confirm.attr(d.options.transferAttrs[e]))}d.$confirm.trigger("unmaskreplace",[h]);d.$confirm.replaceWith(h);d.$confirm=h}};d.init()};a.unmask.defaultOptions={wrapperClass:"unmask-wrap",defaultMasked:"show",labelText:"Show Password",confirmPrefix:"confirm_",transferAttrs:["id","name","class","placeholder","value"]};a.fn.unmask=function(b){return this.each(function(){(new a.unmask(this,b))})}})(jQuery);